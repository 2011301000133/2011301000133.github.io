1. 变分法
2. 最优控制
3. 动态规划

## 变分法
### 固定终止点问题
命令$y(0)=A,y(T)=Z$(T,A,Z都是事先给定的)
### 可变终止点问题

#### 1
给定终止时间T，但终止状态是自由的
**固定时间水平问题，固定时间问题 (fixed-time-horizon problem)，垂直终止线问题（vertical-terminal-line problem）**
例如，一年内利润最大化的问题
#### 2
给定终止状态，但终止时间是自由的  
**固定端点问题 （fixed-endpoint problem），horizonal-terminal-line problem**  
例如，以最小成本生产一批材料
#### 3
终止状态是可变的，被一个约束方程约束$X=\phi (T)$  
比如，客户想在完工日期和完工质量之间做一个 tradeoff



## 一般形式
1. $V[y]=\int_0^T F[t,y(t),y'(t)]dt$  
2. 有时候，最优化目标取决于终止点的位置，所以不需要积分，因为不去要过程的加总  
$V[y]=G(T,y(T))$
3. 有时候，最优化的目标是过程加结果，  
$V[y]=\int_0^TF[t,y(t),y'(t)]dt+G[T,y(T)]$


以上1,2,3 分别称为 **标准问题，Mayer 问题，Bolza问题**，实际上，2和3可以转化为1（证明提要，定义一个新变量$z(T)=G(t,y(t))$,且$z(0)=0$,那么$\int_0^T z'(t)dt=G[T,y(T)]$）

## 变分法
$\min V[y]=\int_0^T F(t,y(t),y'(t))$  
s.t. $y(0)=A,y(T)=Z$  


最优控制理论增加了一个控制变量$u(t)$  
$\min V[y]=\int_0^T F(t,y(t),y'(t),u(t))$  
s.t. $y(0)=A,y(T)=Z,y'(t)=f[t,y(t),u(t)]$  

（动态规划问题）


变分法  
$\min V[y]=\int_0^T F(t,y(t),y'(t))$  
s.t. $y(0)=A,y(T)=Z$  
要求可行集$\{y\}$平滑，F二次可微

### 欧拉方程
#### 技术1：扰动
定义一个扰动（perturbing）曲线$p(t)$,要求$p(0)=p(T)=0$  
假设最优路径是$y^* $  
任意$y(t)=y^* (t)+\varepsilon p(t)$  
泛函$V[y]$又可以看做$V=V(\varepsilon)$  
那么必定有$\dfrac{dV}{d\varepsilon}\mid_{\varepsilon=0}=0$



#### 技术2：Leibniz法则
假设$I(x)=\int_{a(x)}^{b(x)}f(x,t)dt$  
那么$\dfrac{d I(x)}{dx}=f(a(x))a'(x)-f(b(x))b'(x)+\int_{a(x)}^{b(x)}f_x(x,t)dt$


#### 构建欧拉方程
step1：  
$y(t)=y^* (t)+\varepsilon p(t)$  
$\dfrac{dV(\varepsilon)}{d \varepsilon}$  
$=\int_0^T\dfrac{\partial F}{\partial \varepsilon}$(Leibniz法则)  
$=\int_0^T (\dfrac{\partial F}{\partial y}\dfrac{dy}{d\varepsilon}+\dfrac{\partial F}{\partial y'}\dfrac{d y'}{d\varepsilon})dt$(链式法则)  
$\int_0^T F_yp(t)dt+\int_0^T F_{y'}p'(t)dt=0$  


step2:  
对上式第二部分进行 **分部积分**  
$\int_0^T F_{y'}p'(t)dt=F_yp(t)\mid_0^T-\int_0^Tp(t)\dfrac{d F_{y'}}{dt}dt$  
$=-\int_0^Tp(t)\dfrac{d F_{y'}}{dt}dt$  
所以，$\dfrac{dV(\varepsilon)}{d \varepsilon}=\int_0^Tp(t)[F_y-\dfrac{d}{dt}F_{y'}]dt=0$  

step3:  
考虑到$p(t)$也是任意给出的，所以  
$F_y-\dfrac{d}{dt}F_{y'}=0,t\in[0,T]$(**欧拉公式**)  

step4：  
对于事先给定的$F(t,y,y')$  
$\dfrac{dF_{y'}}{dt}=\dfrac{\partial F_{y'}}{\partial t}+\dfrac{\partial F_{y'}}{\partial y}\dfrac{dy}{dt}+\dfrac{\partial F_{y'}}{\partial t}{\dfrac{dy'}{dt}}$  
$=F_{ty'}+F_{yy'}y'(t)+F_{y'y'}y''(t)$  
因此，$F_{y'y'}y''(t)+F_{yy'}y'(t)+F_{ty'}-F_y=0,t\in[0,T]$(**欧拉方程**)  


对于事先给定的$F$,上面是一个关于$y(x)$的偏微分方程，解出这个方程，并且注意到边界条件，就可以得到最终结果了。  


#### 特殊的欧拉方程
$F(t,y')$，欧拉方程是$F_{y'}=C$  
$F(y,y')$，欧拉方程是$d(y'F_{y'}-F)/dt=0$  
$F(y')$,欧拉方程为$F_{y'y'}y''(t)=0$,两项都可以为0，分别都解出直线族  
$F(t,y)$,欧拉方程$F_y=0$不是一个微分方程，而是一个通常的方程，边界条件要巧合才有解。    
#### 推广的欧拉方程
对于含多个状态变量的情况，  
$V[y_1,...,y_n]=\int_0^TF(t,y_1,...,y_n,y'_ 1,...y'_ n)dt$  
用同样方法，得到欧拉方程  
$F_{y_j}-\dfrac{d}{dt}F_{y'_ j}=0$  


对于含高阶导数的情况，  
$V[y]=\int_0^T F(t,y,y',y'',...,y^{(n)})$  
有两种思路，  
一是引入新变量,例如$z\equiv y'$，从而把问题转化为多状态变量的情况  
或者模仿欧拉方程的推导得到$F_y-\dfrac{d}{dt}F_{y'}+\dfrac{d^2}{dt^2}F_{y''}-...+(-1)^n\dfrac{d^n}{dt^n}F_{y^{(n)}}=0$
















end
