### 抓网页

抓网页
```py
import requests
r=requests.get('http://www.baidu.com')
```

抓下来
```py
r.status_code
#200表示正常
#404表示404

r.content #表示str形式的整个网页
```


分析
```py
from lxml import html
a=html.fromstring(r.content)
a.xpath('//div[@id="ftCon"]')[0].text_content()
#//表示任意深度的div，/表示下一深度div
```

### 示例
```py
import requests
from lxml import html


payload = {
    "username": "&lt;USER NAME&gt;",
    "password": "&lt;PASSWORD&gt;",
    "csrfmiddlewaretoken": "&lt;CSRF_TOKEN&gt;"
}


session_requests = requests.session()

login_url = "https://bitbucket.org/account/signin/?next=/"
result = session_requests.get(login_url)

tree = html.fromstring(result.text)
authenticity_token = list(set(tree.xpath("//input[@name='csrfmiddlewaretoken']/@value")))[0]

result = session_requests.post(
    login_url,
    data = payload,
    headers = dict(referer=login_url)
)

## step3：爬取内容
url = 'https://bitbucket.org/dashboard/overview'
result = session_requests.get(
    url,
    headers = dict(referer = url)
)
# print(result. )
tree = html.fromstring(result.content)
bucket_elems = tree.findall(".//span[@class='repo-name']/")
bucket_names = [bucket.text_content.replace("n", "").strip() for bucket in bucket_elems]

print(bucket_names)

result.ok # 会告诉我们最后一次请求是否成功
result.status_code # 会返回给我们最后一次请求的状态
```
